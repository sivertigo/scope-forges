# 要件定義書

## 1. プロジェクト概要

- **アプリ名**: ERDraw
- **目的**:  
  マークダウン形式で ERD（エンティティ・リレーションシップ・ダイアグラム）を直感的に記述・編集できる GUI エディタを提供する。  
  テーブルとリレーションを視覚的に構築し、マークダウン形式に自動変換する。

## 2. スコープ

- Web ブラウザ上で動作するシングルページアプリケーション（SPA）
- GUI エディタとマークダウンエディタの切り替えが可能
- サーバ通信なし（ローカル完結型アプリ）

## 3. 機能要件

| 機能カテゴリ         | 機能名                   | 内容                                                     |
| :------------------- | :----------------------- | :------------------------------------------------------- |
| テーブル管理         | テーブル追加・削除       | テーブルを新規追加、または削除できる                     |
| カラム管理           | カラム追加・編集・削除   | テーブル内にカラムを追加・編集・削除できる               |
| カラム設定           | PK/FK 設定               | 各カラムに対して PK（主キー）/FK（外部キー）を設定できる |
| リレーション認識     | リレーション生成         | FK 設定に基づきテーブル間リレーションを自動認識          |
| マークダウン自動生成 | マークダウン出力         | GUI 入力内容からマークダウンを自動生成して表示           |
| エディタ切り替え     | GUI/Markdown モード切替  | ボタンで GUI エディタとマークダウンエディタを切り替え    |
| 保存機能             | ローカル保存             | 作業内容をブラウザ LocalStorage に保存できる             |
| インポート機能       | マークダウン読込         | 保存したマークダウンデータを読み込み再編集可能           |
| エクスポート機能     | マークダウンダウンロード | `.md`ファイルとしてマークダウンをエクスポートできる      |

## 4. データ項目詳細（GUI エディタ入力対象）

| No       | PK               | FK                                 | カラム名     | 項目名       | データ型                   | NOT NULL         | 備考         |
| :------- | :--------------- | :--------------------------------- | :----------- | :----------- | :------------------------- | :--------------- | :----------- |
| 自動採番 | チェックボックス | チェックボックス＋対象テーブル選択 | テキスト入力 | テキスト入力 | 選択式（例: int, varchar） | チェックボックス | テキスト入力 |

- テーブルごとに「カラム行」を追加・削除できる
- FK 設定時、参照先テーブル・カラムを指定
- GUI 上でリレーションを可視化できる構成

## 5. マークダウン生成形式（例）

```markdown
# ERD

## users

- id (PK)
- name
- email

## posts

- id (PK)
- user_id (FK → users.id)
- title
- content
```

## 6. 非機能要件

- クライアントサイドのみで動作（サーバレス）
- PC ブラウザ向け（スマホ対応は将来的な検討）
- 軽量・高速な動作を重視
- 英語 UI（初期版）、多言語化は将来的検討
- シンプルでモダンな UI デザイン

## 7. 技術スタック（想定）

- フロントエンド: Next.js（App Router 構成） + React + Tailwind CSS
- マークダウンパーサー: `marked.js`
- ER 図プレビュー（将来拡張）: `mermaid.js`
- ローカル保存: `LocalStorage`
- ファイル入出力: `Blob API`

## 8. 画面構成イメージ

```
+-------------------------------------------------------------+
| [Header]                                                     |
|  ERDraw                                                      |
|                                                             |
| [Mode Switch] [GUI Editor] [Markdown Editor]                |
|                                                             |
| [GUI Editor Mode]                                           |
|   +-------------------+    +-------------------+           |
|   | Table 1            |    | Table 2            |          |
|   | [カラム一覧]        |    | [カラム一覧]        |         |
|   | [+カラム追加]       |    | [+カラム追加]       |         |
|   +-------------------+    +-------------------+           |
|                                                             |
| [Footer]                                                    |
|  [Save] [Load] [Export] [Reset]                             |
+-------------------------------------------------------------+
```
